layout: post
title: "UTF-8 et encodage"
date: 2025-09-29 21:44:00 -0000
categories: CATEGORY-1 CATEGORY-2

# Comprendre l'encodage universel

On dit que **UTF-8 est lâ€™encodage universel** parce quâ€™il peut reprÃ©senter **tous les caractÃ¨res dÃ©finis dans Unicode**, de ton accent circonflexe jusquâ€™Ã  lâ€™emoji caca ğŸ’©, tout en restant compatible avec les anciens systÃ¨mes qui utilisaient lâ€™ASCII.

Bref :Â **UTF-8 câ€™est le Wi-Fi illimitÃ©, le reste câ€™est le modem 56k.**

---
## 1. Unicode : le grand dictionnaire des caractÃ¨res

Unicode est comme un **grand dictionnaire**, câ€™est ce **catalogue gÃ©ant** oÃ¹ chaque caractÃ¨re a un petit numÃ©ro de sÃ©rie appelÃ© code point qui commence par U+.  
Genre :

- `ğŸ™‚` = **U+1F642**
- `Ã©` = **U+00E9**
- Et mÃªme le â€œğ“‚€â€ (un Å“il Ã©gyptien random) a son code, au cas oÃ¹ tu voudrais coder en hiÃ©roglyphes dans ton SQL.

> Attention, Unicode **nâ€™est pas un encodage**. Câ€™est juste une liste avec des numÃ©ros. Ã‡a te dit _qui_ tu es, pas _comment_ tâ€™Ã©crire sur disque. Bref, un zoo numÃ©rique.

Ton Ã©diteur de texte manipule les caractÃ¨res Unicode en mÃ©moire. Tant que tu nâ€™as pas **sauvegardÃ© ton fichier**, le caractÃ¨re `ğŸ™‚` reste une valeur abstraite : lâ€™Ã©diteur sait que câ€™est un caractÃ¨re Unicode valide (U+1F642) et peut demander Ã  la police dâ€™afficher le bon dessin.

Mais dÃ¨s quâ€™il faut **enregistrer le fichier sur le disque**, il faut transformer ce numÃ©ro en **suite dâ€™octets**. Parce que devine quoi ? Un fichier câ€™est juste un gros tas de 0 et de 1. Câ€™est exactement le rÃ´le de lâ€™encodage. UTF-8 est un encodage, il prend ton `ğŸ™‚` et le transforme en ce monstre : `F0 9F 99 82` pour pouvoir le stocker. Pas sexy, mais Ã§a marche. Si tu ne prÃ©cises rien, la plupart des Ã©diteurs modernes choisissent **UTF-8** par dÃ©faut.

---
## 2. Comment UTF-8 encode les caractÃ¨res

UTF-8 utilise un principe simple :

- Plus le numÃ©ro (code point) est petit, moins on a besoin dâ€™octets.
- Plus il est grand, plus on ajoute dâ€™octets.

### 2.1 RÃ¨gles de base

- 1 octet â†’ pour les 128 premiers caractÃ¨res (ASCII)
- 2 octets â†’ jusquâ€™Ã  11 bits de code
- 3 octets â†’ jusquâ€™Ã  16 bits
- 4 octets â†’ jusquâ€™Ã  21 bits (maximum de Unicode)

Exemple en binaire, U+1F642 = `0001 1111 0110 0100 0010` (20 bits utiles).  
20 bits â‡’ on a besoin de **4 octets**.

### 2.2 ModÃ¨le pour 4 octets

Le modÃ¨le pour 4 octets est 1 octet d'en tÃªte et 3 octets de suite :
`11110xxx 10xxxxxx 10xxxxxx 10xxxxxx`

Pour 3 octets, l'octet d'en-tÃªte serait `1110 xxxx`.  
Pour l'octet d'en-tÃªte, le bit de poids fort est toujours Ã©gal Ã  1. Ensuite il y a autant de 1 que d'octets de suite (3) puis on ajoute des 0. Les `x` seront remplacÃ©s par les **bits du code point** (0001 1111 0110 0100 0010) de gauche Ã  droite.

- Octet 1 (`11110xxx`) : prend les 2 bits les plus Ã  gauche de `0001`, rempli les 2 derniers x
    - RÃ©sultat : `11110000` â†’ `F0`
- Octet 2 (`10xxxxxx`) : prend les 6 bits suivants â†’ `011111`
    - RÃ©sultat : `10011111` â†’ `9F`
- Octet 3 (`10xxxxxx`) : prend les 6 bits suivants â†’ `011001`
    - RÃ©sultat : `10011001` â†’ `99`
- Octet 4 (`10xxxxxx`) : prend les bits restants â†’ `000010`
    - RÃ©sultat : `10000010` â†’ `82`

UTF-8 hex : `F0 9F 99 82`  
Binaire : `1111 0000 1001 1111 1001 1001 1000 0010`

---
## 3. Pourquoi lâ€™encodage est crucial

Si tu lis ces 4 octets dans un fichier UTF-8, le parser les traduit en caractÃ¨res Unicode (recompose les 20 bits et obtient **U+1F642**), affichant `ğŸ™‚`.

Si lâ€™encodage nâ€™est pas le bon, câ€™est la tragÃ©die.  
Tâ€™as sauvegardÃ© ton fichier en UTF-8, et un autre logiciel dÃ©bile essaie de lâ€™ouvrir en ISO-8859-1. Quand il tombe sur `F0 9F 99 82`, il panique. Ton ğŸ™‚ se transforme en ï¿½.  
Câ€™est plus un smiley, câ€™est le cri silencieux de ton Ã¢me.

Câ€™est un peu comme si tu donnais les paroles dâ€™une chanson de Jul Ã  un traducteur latin â†’ Ã§a nâ€™a plus aucun sens et tout le monde souffre.

> MoralitÃ© : la prochaine fois que tu vois un caractÃ¨re chelou sâ€™afficher en losange avec un point dâ€™interrogation, ce nâ€™est pas ton PC qui est possÃ©dÃ©.  
> Câ€™est juste toi qui as oubliÃ© de dire Ã  tout le monde : **â€œon parle en UTF-8 ici, merciâ€**.
